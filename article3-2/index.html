


<!doctype html>
<html lang="ja" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1, mkdocs-material-5.1.5">
    
    
      
        <title>テキスト送信 - FaBo Android Docs</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.df84b5fe.min.css">
      
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    
      
    
    
  </head>
  
  
    <body dir="">
  
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#_1" class="md-skip">
          コンテンツにスキップ
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="">
    <a href=".." title="FaBo Android Docs" class="md-header-nav__button md-logo" aria-label="FaBo Android Docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            FaBo Android Docs
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              テキスト送信
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="検索" placeholder="検索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="FaBo Android Docs" class="md-nav__button md-logo" aria-label="FaBo Android Docs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    FaBo Android Docs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="AndroDocs" class="md-nav__link">
      AndroDocs
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../article-3-5/" title="Bluetoothでのデバック" class="md-nav__link">
      Bluetoothでのデバック
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../article2-1/" title="事前準備" class="md-nav__link">
      事前準備
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../article2-2/" title="テキスト送受信" class="md-nav__link">
      テキスト送受信
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../article2-3/" title="AndroidからLED操作" class="md-nav__link">
      AndroidからLED操作
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../article2-4/" title="センサーデータをAndroid端末で表示" class="md-nav__link">
      センサーデータをAndroid端末で表示
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../article2-5/" title="ロボットカー制御" class="md-nav__link">
      ロボットカー制御
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../article3-1/" title="事前準備" class="md-nav__link">
      事前準備
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        テキスト送信
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg>
        </span>
      </label>
    
    <a href="./" title="テキスト送信" class="md-nav__link md-nav__link--active">
      テキスト送信
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="目次">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      目次
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#arduino" class="md-nav__link">
    Arduino側の設定
  </a>
  
    <nav class="md-nav" aria-label="Arduino側の設定">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adrduino-uno" class="md-nav__link">
    Adrduino Uno
  </a>
  
    <nav class="md-nav" aria-label="Adrduino Uno">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#arduino-uno" class="md-nav__link">
    回路 (Arduino Uno)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#arduino-uno_1" class="md-nav__link">
    スケッチ (Arduino Uno)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#arduino-mega" class="md-nav__link">
    Arduino Mega
  </a>
  
    <nav class="md-nav" aria-label="Arduino Mega">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#arduino-mega_1" class="md-nav__link">
    回路 (Arduino Mega)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#arduino-mega_2" class="md-nav__link">
    スケッチ (Arduino Mega)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#android" class="md-nav__link">
    Android側の設定
  </a>
  
    <nav class="md-nav" aria-label="Android側の設定">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#android_1" class="md-nav__link">
    Androidコード入力
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    実行確認
  </a>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../article3-3/" title="テキスト受信" class="md-nav__link">
      テキスト受信
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../article3-4/" title="AndroidからLED制御" class="md-nav__link">
      AndroidからLED制御
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../camera201/" title="TextureViewの作成" class="md-nav__link">
      TextureViewの作成
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../camera202/" title="CameraManager" class="md-nav__link">
      CameraManager
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../camera203/" title="Cameraをオープン" class="md-nav__link">
      Cameraをオープン
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../intent00/" title="Intent" class="md-nav__link">
      Intent
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../intent01/" title="暗示的Intent" class="md-nav__link">
      暗示的Intent
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../intent03/" title="Intentでカメラを操作" class="md-nav__link">
      Intentでカメラを操作
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../intent04/" title="Intentでビデオを操作" class="md-nav__link">
      Intentでビデオを操作
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../intent05/" title="Intentを作成する" class="md-nav__link">
      Intentを作成する
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../link/" title="Link" class="md-nav__link">
      Link
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../ui00/" title="UI Layout" class="md-nav__link">
      UI Layout
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../ui01/" title="FindViewById" class="md-nav__link">
      FindViewById
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../ui02/" title="XMLでのLayout" class="md-nav__link">
      XMLでのLayout
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../ui03/" title="XMLでのLayout2" class="md-nav__link">
      XMLでのLayout2
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../ui04/" title="Button" class="md-nav__link">
      Button
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../ui05/" title="TextView" class="md-nav__link">
      TextView
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../ui06/" title="EditText" class="md-nav__link">
      EditText
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../ui07/" title="電卓の作成" class="md-nav__link">
      電卓の作成
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../wear01/" title="Android Wear" class="md-nav__link">
      Android Wear
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../wear02/" title="Android Wearの環境設定" class="md-nav__link">
      Android Wearの環境設定
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../wear03/" title="Android Wearと実機の接続" class="md-nav__link">
      Android Wearと実機の接続
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../wear04/" title="Android Wearとのデータ連携" class="md-nav__link">
      Android Wearとのデータ連携
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../webview00/" title="WebView" class="md-nav__link">
      WebView
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../webview01/" title="WebView表示" class="md-nav__link">
      WebView表示
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-35" type="checkbox" id="nav-35">
    
    <label class="md-nav__link" for="nav-35">
      01 app
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="01 app" data-md-level="1">
      <label class="md-nav__title" for="nav-35">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        01 app
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../01_app/chapter01/" title="環境設定" class="md-nav__link">
      環境設定
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../01_app/chapter02/" title="Hello World" class="md-nav__link">
      Hello World
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../01_app/chapter03/" title="アプリの種類" class="md-nav__link">
      アプリの種類
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../01_app/chapter04/" title="Activityのライフサイクル" class="md-nav__link">
      Activityのライフサイクル
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../01_app/chapter05/" title="Viewでの描画処理" class="md-nav__link">
      Viewでの描画処理
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../01_app/chapter06/" title="タッチイベント" class="md-nav__link">
      タッチイベント
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../01_app/chapter07/" title="音の再生" class="md-nav__link">
      音の再生
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../01_app/chapter08/" title="太鼓アプリの作成" class="md-nav__link">
      太鼓アプリの作成
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../01_app/chapter09/" title="ピアノアプリの作成1" class="md-nav__link">
      ピアノアプリの作成1
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../01_app/chapter10/" title="ピアノアプリの作成(2)" class="md-nav__link">
      ピアノアプリの作成(2)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../01_app/chapter11/" title="Arduino Bluetooth連携" class="md-nav__link">
      Arduino Bluetooth連携
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../01_app/chapter12/" title="Arduino USB Host連携" class="md-nav__link">
      Arduino USB Host連携
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-36" type="checkbox" id="nav-36">
    
    <label class="md-nav__link" for="nav-36">
      02 appendix
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="02 appendix" data-md-level="1">
      <label class="md-nav__title" for="nav-36">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        02 appendix
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../02_appendix/appendix01/" title="Ap1.USBデバックモードを有効にする" class="md-nav__link">
      Ap1.USBデバックモードを有効にする
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../02_appendix/appendix02/" title="Appendix2.Logcatでログを見る" class="md-nav__link">
      Appendix2.Logcatでログを見る
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../02_appendix/appendix03/" title="Appendix3.ショートカットキー" class="md-nav__link">
      Appendix3.ショートカットキー
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../02_appendix/appendix04/" title="Appendix4.Androidの歴史" class="md-nav__link">
      Appendix4.Androidの歴史
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../02_appendix/appendix05/" title="SourceTreeとGithubの連携" class="md-nav__link">
      SourceTreeとGithubの連携
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../02_appendix/appendix06/" title="Appendix6.GithubのPullrequest" class="md-nav__link">
      Appendix6.GithubのPullrequest
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../02_appendix/appendix07/" title="Appendix7.Githubのコマンドをいじる" class="md-nav__link">
      Appendix7.Githubのコマンドをいじる
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-37" type="checkbox" id="nav-37">
    
    <label class="md-nav__link" for="nav-37">
      03 maps
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="03 maps" data-md-level="1">
      <label class="md-nav__title" for="nav-37">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        03 maps
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../03_maps/maps/" title="Google Maps" class="md-nav__link">
      Google Maps
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../03_maps/maps00/" title="Google Maps" class="md-nav__link">
      Google Maps
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../03_maps/maps01/" title="Google Maps用プロジェクトの生成" class="md-nav__link">
      Google Maps用プロジェクトの生成
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../03_maps/maps02/" title="API Keyの取得" class="md-nav__link">
      API Keyの取得
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../03_maps/maps03/" title="Mapsのカスタマイズ" class="md-nav__link">
      Mapsのカスタマイズ
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../03_maps/maps04/" title="Mapsの装飾" class="md-nav__link">
      Mapsの装飾
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../03_maps/maps05/" title="Maps関連API" class="md-nav__link">
      Maps関連API
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-38" type="checkbox" id="nav-38">
    
    <label class="md-nav__link" for="nav-38">
      04 sensor
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="04 sensor" data-md-level="1">
      <label class="md-nav__title" for="nav-38">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        04 sensor
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../04_sensor/sensor00/" title="Sensor" class="md-nav__link">
      Sensor
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../04_sensor/sensor01/" title="加速度センサ" class="md-nav__link">
      加速度センサ
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../04_sensor/sensor02/" title="Gyroscope" class="md-nav__link">
      Gyroscope
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../04_sensor/sensor03/" title="回転度" class="md-nav__link">
      回転度
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../04_sensor/sensor04/" title="温度" class="md-nav__link">
      温度
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../04_sensor/sensor05/" title="照度センサ" class="md-nav__link">
      照度センサ
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../04_sensor/sensor06/" title="気圧センサ" class="md-nav__link">
      気圧センサ
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../04_sensor/sensor07/" title="近接センサ" class="md-nav__link">
      近接センサ
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../04_sensor/sensor08/" title="万歩計" class="md-nav__link">
      万歩計
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../04_sensor/sensor09/" title="磁力計" class="md-nav__link">
      磁力計
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../04_sensor/sensor10/" title="GPS" class="md-nav__link">
      GPS
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-39" type="checkbox" id="nav-39">
    
    <label class="md-nav__link" for="nav-39">
      05 camera
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="05 camera" data-md-level="1">
      <label class="md-nav__title" for="nav-39">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        05 camera
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../05_camera/camera01/" title="Camera用の土台の作成" class="md-nav__link">
      Camera用の土台の作成
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../05_camera/camera02/" title="Cameraの組み込み" class="md-nav__link">
      Cameraの組み込み
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../05_camera/camera03/" title="Cameraへのオーバーレイ" class="md-nav__link">
      Cameraへのオーバーレイ
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../05_camera/camera04/" title="CameraとGPS" class="md-nav__link">
      CameraとGPS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../05_camera/camera05/" title="端末の方角の計算" class="md-nav__link">
      端末の方角の計算
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-40" type="checkbox" id="nav-40">
    
    <label class="md-nav__link" for="nav-40">
      06 camera2
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="06 camera2" data-md-level="1">
      <label class="md-nav__title" for="nav-40">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        06 camera2
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../06_camera2/camera201/" title="TextureViewの作成" class="md-nav__link">
      TextureViewの作成
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../06_camera2/camera202/" title="CameraManager" class="md-nav__link">
      CameraManager
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../06_camera2/camera203/" title="Cameraをオープン" class="md-nav__link">
      Cameraをオープン
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-41" type="checkbox" id="nav-41">
    
    <label class="md-nav__link" for="nav-41">
      8.0
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="8.0" data-md-level="1">
      <label class="md-nav__title" for="nav-41">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        8.0
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../8.0/maps/" title="Google Maps" class="md-nav__link">
      Google Maps
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="目次">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      目次
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#arduino" class="md-nav__link">
    Arduino側の設定
  </a>
  
    <nav class="md-nav" aria-label="Arduino側の設定">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adrduino-uno" class="md-nav__link">
    Adrduino Uno
  </a>
  
    <nav class="md-nav" aria-label="Adrduino Uno">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#arduino-uno" class="md-nav__link">
    回路 (Arduino Uno)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#arduino-uno_1" class="md-nav__link">
    スケッチ (Arduino Uno)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#arduino-mega" class="md-nav__link">
    Arduino Mega
  </a>
  
    <nav class="md-nav" aria-label="Arduino Mega">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#arduino-mega_1" class="md-nav__link">
    回路 (Arduino Mega)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#arduino-mega_2" class="md-nav__link">
    スケッチ (Arduino Mega)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#android" class="md-nav__link">
    Android側の設定
  </a>
  
    <nav class="md-nav" aria-label="Android側の設定">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#android_1" class="md-nav__link">
    Androidコード入力
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    実行確認
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  
                
                
                <h1 id="_1">テキスト送信</h1>
<h2 id="arduino">Arduino側の設定</h2>
<p>回路を作成し、スケッチの入力を行います。
今回はブレッドボードを使用せず、シリアルアダプタと直接繋げます。
なお、Arduino UnoとArduino Megaでは配線とスケッチが少し異なりますので、別々に記載します。</p>
<h3 id="adrduino-uno">Adrduino Uno</h3>
<h4 id="arduino-uno">回路 (Arduino Uno)</h4>
<p><img alt="" src="../usb2-01.jpg" /></p>
<h4 id="arduino-uno_1">スケッチ (Arduino Uno)</h4>
<p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21</pre></div></td><td class=code><div class=codehilite><pre><span></span><code><span class=cp>#include</span> <span class=cpf>&lt;SoftwareSerial.h&gt;</span><span class=cp></span>

<span class=c1>//androidで使用するピンを指定</span>
<span class=n>SoftwareSerial</span> <span class=nf>android</span><span class=p>(</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>);</span>

<span class=kt>void</span> <span class=nf>setup</span><span class=p>(){</span>
  <span class=c1>//android用のシリアルのポートを設定</span>
  <span class=n>android</span><span class=p>.</span><span class=n>begin</span><span class=p>(</span><span class=mi>9600</span><span class=p>);</span>
  <span class=c1>// arduinoのシリアルモニタ用</span>
  <span class=n>Serial</span><span class=p>.</span><span class=n>begin</span><span class=p>(</span><span class=mi>19200</span><span class=p>);</span> 

  <span class=n>Serial</span><span class=p>.</span><span class=n>write</span><span class=p>(</span><span class=s>&quot;init&quot;</span><span class=p>);</span>
<span class=p>}</span>

<span class=kt>void</span> <span class=nf>loop</span><span class=p>(){</span>

  <span class=k>if</span><span class=p>(</span><span class=n>android</span><span class=p>.</span><span class=n>available</span><span class=p>()){</span>
    <span class=n>Serial</span><span class=p>.</span><span class=n>write</span><span class=p>(</span><span class=n>android</span><span class=p>.</span><span class=n>read</span><span class=p>());</span>
  <span class=p>}</span> 

<span class=p>}</span>
</code></pre></div></td></tr></table></p>
<h3 id="arduino-mega">Arduino Mega</h3>
<p><img alt="" src="../usb2-02.jpg" /></p>
<h4 id="arduino-mega_1">回路 (Arduino Mega)</h4>
<p><br>
<img alt="" src="../usb2-03.jpg" /></p>
<p>Arduino 18 TX1  -&gt; USB Serial RXD
<br>
Arduino 19 RX1 -&gt;  USB Serial TXD</p>
<p>参考
<br>
http://arduino.cc/en/Serial/begin</p>
<h4 id="arduino-mega_2">スケッチ (Arduino Mega)</h4>
<p>18, 19は、TX1, RX1となっており、Arduinoでは Serial1.begin(速度)で設定できる。</p>
<p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class=code><div class=codehilite><pre><span></span><code><span class=n>void</span> <span class=n>setup</span><span class=p>()</span><span class=err>{</span>
  <span class=o>//</span><span class=n>android用のシリアルのポートを設定</span>
  <span class=n>Serial1</span><span class=p>.</span><span class=k>begin</span><span class=p>(</span><span class=mi>9600</span><span class=p>);</span>
  <span class=o>//</span> <span class=n>arduinoのシリアルモニタ用</span>
  <span class=nb>Serial</span><span class=p>.</span><span class=k>begin</span><span class=p>(</span><span class=mi>19200</span><span class=p>);</span> 

  <span class=nb>Serial</span><span class=p>.</span><span class=k>write</span><span class=p>(</span><span class=ss>&quot;init&quot;</span><span class=p>);</span>
<span class=err>}</span>

<span class=n>void</span> <span class=n>loop</span><span class=p>()</span><span class=err>{</span>

  <span class=k>if</span><span class=p>(</span><span class=n>Serial1</span><span class=p>.</span><span class=n>available</span><span class=p>())</span><span class=err>{</span>
    <span class=nb>Serial</span><span class=p>.</span><span class=k>write</span><span class=p>(</span><span class=n>Serial1</span><span class=p>.</span><span class=k>read</span><span class=p>());</span>
  <span class=err>}</span> 

<span class=err>}</span>
</code></pre></div></td></tr></table></p>
<h2 id="android">Android側の設定</h2>
<h3 id="android_1">Androidコード入力</h3>
<p>MainActivity.java</p>
<p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134</pre></div></td><td class=code><div class=codehilite><pre><span></span><code><span class=n>package</span> <span class=n>gclue</span><span class=o>.</span><span class=n>com</span><span class=o>.</span><span class=n>myusbhost</span><span class=p>;</span>

<span class=kn>import</span> <span class=nn>android.content.BroadcastReceiver</span><span class=p>;</span>
<span class=kn>import</span> <span class=nn>android.content.Context</span><span class=p>;</span>
<span class=kn>import</span> <span class=nn>android.content.Intent</span><span class=p>;</span>
<span class=kn>import</span> <span class=nn>android.hardware.usb.UsbManager</span><span class=p>;</span>
<span class=kn>import</span> <span class=nn>android.os.Bundle</span><span class=p>;</span>
<span class=kn>import</span> <span class=nn>android.support.v7.app.ActionBarActivity</span><span class=p>;</span>
<span class=kn>import</span> <span class=nn>android.util.Log</span><span class=p>;</span>
<span class=kn>import</span> <span class=nn>android.view.Menu</span><span class=p>;</span>
<span class=kn>import</span> <span class=nn>android.view.MenuItem</span><span class=p>;</span>
<span class=kn>import</span> <span class=nn>android.view.View</span><span class=p>;</span>
<span class=kn>import</span> <span class=nn>android.widget.Button</span><span class=p>;</span>
<span class=kn>import</span> <span class=nn>android.widget.Toast</span><span class=p>;</span>

<span class=kn>import</span> <span class=nn>com.ftdi.j2xx.D2xxManager</span><span class=p>;</span>
<span class=kn>import</span> <span class=nn>com.ftdi.j2xx.FT_Device</span><span class=p>;</span>

<span class=n>public</span> <span class=k>class</span> <span class=nc>MainActivity</span> <span class=n>extends</span> <span class=n>ActionBarActivity</span> <span class=p>{</span>

    <span class=n>private</span> <span class=n>FT_Device</span> <span class=n>ftDev</span> <span class=o>=</span> <span class=n>null</span><span class=p>;</span>
    <span class=n>private</span> <span class=n>static</span> <span class=n>Context</span> <span class=n>mContext</span><span class=p>;</span>
    <span class=n>private</span> <span class=n>D2xxManager</span> <span class=n>ftdid2xx</span><span class=p>;</span>
    <span class=n>private</span> <span class=n>static</span> <span class=n>final</span> <span class=n>String</span> <span class=n>TAG</span> <span class=o>=</span> <span class=s2>&quot;USB&quot;</span><span class=p>;</span>
    <span class=n>private</span> <span class=nb>int</span> <span class=n>iavailable</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
    <span class=n>private</span> <span class=n>static</span> <span class=n>final</span> <span class=nb>int</span> <span class=n>readLength</span> <span class=o>=</span> <span class=mi>512</span><span class=p>;</span>
    <span class=n>byte</span><span class=p>[]</span> <span class=n>readData</span><span class=p>;</span>
    <span class=n>char</span><span class=p>[]</span> <span class=n>readDataToText</span><span class=p>;</span>
    <span class=n>private</span> <span class=n>Button</span> <span class=n>mOutputButton</span><span class=p>;</span>

    <span class=nd>@Override</span>
    <span class=n>protected</span> <span class=n>void</span> <span class=n>onCreate</span><span class=p>(</span><span class=n>Bundle</span> <span class=n>savedInstanceState</span><span class=p>)</span> <span class=p>{</span>
        <span class=nb>super</span><span class=o>.</span><span class=n>onCreate</span><span class=p>(</span><span class=n>savedInstanceState</span><span class=p>);</span>
        <span class=n>setContentView</span><span class=p>(</span><span class=n>R</span><span class=o>.</span><span class=n>layout</span><span class=o>.</span><span class=n>activity_main</span><span class=p>);</span>

        <span class=k>try</span> <span class=p>{</span>
            <span class=n>ftdid2xx</span> <span class=o>=</span> <span class=n>D2xxManager</span><span class=o>.</span><span class=n>getInstance</span><span class=p>(</span><span class=n>this</span><span class=p>);</span>
        <span class=p>}</span> <span class=n>catch</span> <span class=p>(</span><span class=n>D2xxManager</span><span class=o>.</span><span class=n>D2xxException</span> <span class=n>ex</span><span class=p>)</span> <span class=p>{</span>
            <span class=n>Log</span><span class=o>.</span><span class=n>e</span><span class=p>(</span><span class=n>TAG</span><span class=p>,</span><span class=n>ex</span><span class=o>.</span><span class=n>toString</span><span class=p>());</span>
        <span class=p>}</span>

        <span class=n>mContext</span> <span class=o>=</span> <span class=n>this</span><span class=o>.</span><span class=n>getBaseContext</span><span class=p>();</span>

        <span class=n>openUsb</span><span class=p>();</span>

        <span class=o>//</span> <span class=err>ボタンが押されたら</span><span class=n>USBに値を送り込む</span>
        <span class=n>mOutputButton</span> <span class=o>=</span> <span class=p>(</span><span class=n>Button</span><span class=p>)</span><span class=n>findViewById</span><span class=p>(</span><span class=n>R</span><span class=o>.</span><span class=n>id</span><span class=o>.</span><span class=n>outputButton</span><span class=p>);</span>
        <span class=n>mOutputButton</span><span class=o>.</span><span class=n>setOnClickListener</span><span class=p>(</span><span class=n>new</span> <span class=n>View</span><span class=o>.</span><span class=n>OnClickListener</span><span class=p>()</span> <span class=p>{</span>
            <span class=nd>@Override</span>
            <span class=n>public</span> <span class=n>void</span> <span class=n>onClick</span><span class=p>(</span><span class=n>View</span> <span class=n>v</span><span class=p>)</span> <span class=p>{</span>
                <span class=n>SendMessage</span><span class=p>(</span><span class=s2>&quot;1&quot;</span><span class=p>);</span>
            <span class=p>}</span>
        <span class=p>});</span>
    <span class=p>}</span>

    <span class=n>public</span> <span class=n>void</span> <span class=n>openUsb</span><span class=p>(){</span>
        <span class=nb>int</span> <span class=n>devCount</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
        <span class=n>devCount</span> <span class=o>=</span> <span class=n>ftdid2xx</span><span class=o>.</span><span class=n>createDeviceInfoList</span><span class=p>(</span><span class=n>this</span><span class=p>);</span>
        <span class=k>if</span> <span class=p>(</span><span class=n>devCount</span> <span class=o>&lt;=</span> <span class=mi>0</span><span class=p>)</span>
        <span class=p>{</span>
            <span class=n>Toast</span><span class=o>.</span><span class=n>makeText</span><span class=p>(</span><span class=n>this</span><span class=p>,</span> <span class=s2>&quot;デバイスが発見できません。&quot;</span> <span class=o>+</span> <span class=n>Integer</span><span class=o>.</span><span class=n>toString</span><span class=p>(</span><span class=n>devCount</span><span class=p>),</span> <span class=n>Toast</span><span class=o>.</span><span class=n>LENGTH_LONG</span><span class=p>)</span><span class=o>.</span><span class=n>show</span><span class=p>();</span>
            <span class=n>Log</span><span class=o>.</span><span class=n>i</span><span class=p>(</span><span class=n>TAG</span><span class=p>,</span><span class=s2>&quot;デバイスが発見できましせんでした。&quot;</span><span class=p>);</span>
            <span class=k>return</span><span class=p>;</span>
        <span class=p>}</span>
        <span class=k>else</span><span class=p>{</span>
            <span class=n>Toast</span><span class=o>.</span><span class=n>makeText</span><span class=p>(</span><span class=n>this</span><span class=p>,</span> <span class=s2>&quot;&quot;</span> <span class=o>+</span> <span class=n>devCount</span> <span class=o>+</span> <span class=s2>&quot;個のデバイスを発見しました。&quot;</span><span class=p>,</span> <span class=n>Toast</span><span class=o>.</span><span class=n>LENGTH_LONG</span><span class=p>)</span><span class=o>.</span><span class=n>show</span><span class=p>();</span>
            <span class=n>Log</span><span class=o>.</span><span class=n>i</span><span class=p>(</span><span class=n>TAG</span><span class=p>,</span><span class=s2>&quot;&quot;</span> <span class=o>+</span> <span class=n>devCount</span> <span class=o>+</span> <span class=s2>&quot;個のデバイスを発見しました。&quot;</span><span class=p>);</span>
        <span class=p>}</span>

        <span class=k>if</span><span class=p>(</span><span class=n>null</span> <span class=o>==</span> <span class=n>ftDev</span><span class=p>)</span>
        <span class=p>{</span>
            <span class=n>ftDev</span> <span class=o>=</span> <span class=n>ftdid2xx</span><span class=o>.</span><span class=n>openByIndex</span><span class=p>(</span><span class=n>mContext</span><span class=p>,</span> <span class=mi>0</span><span class=p>);</span>
        <span class=p>}</span>
        <span class=k>else</span>
        <span class=p>{</span>
            <span class=n>synchronized</span><span class=p>(</span><span class=n>ftDev</span><span class=p>)</span>
            <span class=p>{</span>
                <span class=n>ftDev</span> <span class=o>=</span> <span class=n>ftdid2xx</span><span class=o>.</span><span class=n>openByIndex</span><span class=p>(</span><span class=n>mContext</span><span class=p>,</span> <span class=mi>0</span><span class=p>);</span>
            <span class=p>}</span>
        <span class=p>}</span>

        <span class=o>//</span><span class=n>ftDev</span><span class=o>.</span><span class=n>setBitMode</span><span class=p>((</span><span class=n>byte</span><span class=p>)</span> <span class=mi>0</span><span class=p>,</span> <span class=n>D2xxManager</span><span class=o>.</span><span class=n>FT_BITMODE_RESET</span><span class=p>);</span>
        <span class=n>ftDev</span><span class=o>.</span><span class=n>setBaudRate</span><span class=p>(</span><span class=mi>9600</span><span class=p>);</span>
        <span class=n>ftDev</span><span class=o>.</span><span class=n>setDataCharacteristics</span><span class=p>(</span><span class=n>D2xxManager</span><span class=o>.</span><span class=n>FT_DATA_BITS_8</span><span class=p>,</span> <span class=n>D2xxManager</span><span class=o>.</span><span class=n>FT_STOP_BITS_1</span><span class=p>,</span> <span class=n>D2xxManager</span><span class=o>.</span><span class=n>FT_PARITY_NONE</span><span class=p>);</span>
        <span class=n>ftDev</span><span class=o>.</span><span class=n>setFlowControl</span><span class=p>(</span><span class=n>D2xxManager</span><span class=o>.</span><span class=n>FT_FLOW_NONE</span><span class=p>,</span> <span class=p>(</span><span class=n>byte</span><span class=p>)</span> <span class=mh>0x0b</span><span class=p>,</span> <span class=p>(</span><span class=n>byte</span><span class=p>)</span> <span class=mh>0x0d</span><span class=p>);</span>
        <span class=n>ftDev</span><span class=o>.</span><span class=n>purge</span><span class=p>((</span><span class=n>byte</span><span class=p>)</span> <span class=p>(</span><span class=n>D2xxManager</span><span class=o>.</span><span class=n>FT_PURGE_TX</span> <span class=o>|</span> <span class=n>D2xxManager</span><span class=o>.</span><span class=n>FT_PURGE_RX</span><span class=p>));</span>
        <span class=n>ftDev</span><span class=o>.</span><span class=n>restartInTask</span><span class=p>();</span>

    <span class=p>}</span>


    <span class=nd>@Override</span>
    <span class=n>public</span> <span class=n>boolean</span> <span class=n>onCreateOptionsMenu</span><span class=p>(</span><span class=n>Menu</span> <span class=n>menu</span><span class=p>)</span> <span class=p>{</span>
        <span class=o>//</span> <span class=n>Inflate</span> <span class=n>the</span> <span class=n>menu</span><span class=p>;</span> <span class=n>this</span> <span class=n>adds</span> <span class=n>items</span> <span class=n>to</span> <span class=n>the</span> <span class=n>action</span> <span class=n>bar</span> <span class=k>if</span> <span class=n>it</span> <span class=ow>is</span> <span class=n>present</span><span class=o>.</span>
        <span class=n>getMenuInflater</span><span class=p>()</span><span class=o>.</span><span class=n>inflate</span><span class=p>(</span><span class=n>R</span><span class=o>.</span><span class=n>menu</span><span class=o>.</span><span class=n>menu_main</span><span class=p>,</span> <span class=n>menu</span><span class=p>);</span>
        <span class=k>return</span> <span class=n>true</span><span class=p>;</span>
    <span class=p>}</span>

    <span class=nd>@Override</span>
    <span class=n>public</span> <span class=n>boolean</span> <span class=n>onOptionsItemSelected</span><span class=p>(</span><span class=n>MenuItem</span> <span class=n>item</span><span class=p>)</span> <span class=p>{</span>
        <span class=o>//</span> <span class=n>Handle</span> <span class=n>action</span> <span class=n>bar</span> <span class=n>item</span> <span class=n>clicks</span> <span class=n>here</span><span class=o>.</span> <span class=n>The</span> <span class=n>action</span> <span class=n>bar</span> <span class=n>will</span>
        <span class=o>//</span> <span class=n>automatically</span> <span class=n>handle</span> <span class=n>clicks</span> <span class=n>on</span> <span class=n>the</span> <span class=n>Home</span><span class=o>/</span><span class=n>Up</span> <span class=n>button</span><span class=p>,</span> <span class=n>so</span> <span class=nb>long</span>
        <span class=o>//</span> <span class=k>as</span> <span class=n>you</span> <span class=n>specify</span> <span class=n>a</span> <span class=n>parent</span> <span class=n>activity</span> <span class=ow>in</span> <span class=n>AndroidManifest</span><span class=o>.</span><span class=n>xml</span><span class=o>.</span>
        <span class=nb>int</span> <span class=nb>id</span> <span class=o>=</span> <span class=n>item</span><span class=o>.</span><span class=n>getItemId</span><span class=p>();</span>

        <span class=o>//</span><span class=n>noinspection</span> <span class=n>SimplifiableIfStatement</span>
        <span class=k>if</span> <span class=p>(</span><span class=nb>id</span> <span class=o>==</span> <span class=n>R</span><span class=o>.</span><span class=n>id</span><span class=o>.</span><span class=n>action_settings</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>return</span> <span class=n>true</span><span class=p>;</span>
        <span class=p>}</span>

        <span class=k>return</span> <span class=nb>super</span><span class=o>.</span><span class=n>onOptionsItemSelected</span><span class=p>(</span><span class=n>item</span><span class=p>);</span>
    <span class=p>}</span>

    <span class=n>public</span> <span class=n>void</span> <span class=n>SendMessage</span><span class=p>(</span><span class=n>String</span> <span class=n>msg</span><span class=p>)</span> <span class=p>{</span>

        <span class=k>if</span><span class=p>(</span><span class=n>ftDev</span> <span class=o>==</span> <span class=n>null</span><span class=p>){</span>
            <span class=k>return</span><span class=p>;</span>
        <span class=p>}</span>

        <span class=n>synchronized</span> <span class=p>(</span><span class=n>ftDev</span><span class=p>)</span> <span class=p>{</span>
            <span class=k>if</span> <span class=p>(</span><span class=n>ftDev</span><span class=o>.</span><span class=n>isOpen</span><span class=p>()</span> <span class=o>==</span> <span class=n>false</span><span class=p>)</span> <span class=p>{</span>
                <span class=n>Log</span><span class=o>.</span><span class=n>e</span><span class=p>(</span><span class=s2>&quot;j2xx&quot;</span><span class=p>,</span> <span class=s2>&quot;SendMessage: device not open&quot;</span><span class=p>);</span>
                <span class=k>return</span><span class=p>;</span>
            <span class=p>}</span>

            <span class=n>ftDev</span><span class=o>.</span><span class=n>setLatencyTimer</span><span class=p>((</span><span class=n>byte</span><span class=p>)</span> <span class=mi>16</span><span class=p>);</span>

            <span class=k>if</span> <span class=p>(</span><span class=n>msg</span> <span class=o>!=</span> <span class=n>null</span><span class=p>)</span> <span class=p>{</span>
                <span class=n>byte</span><span class=p>[]</span> <span class=n>OutData</span> <span class=o>=</span> <span class=n>msg</span><span class=o>.</span><span class=n>getBytes</span><span class=p>();</span>
                <span class=n>ftDev</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=n>OutData</span><span class=p>,</span> <span class=n>msg</span><span class=o>.</span><span class=n>length</span><span class=p>());</span>
            <span class=p>}</span>
        <span class=p>}</span>
    <span class=p>}</span>
<span class=p>}</span>
</code></pre></div></td></tr></table></p>
<p>activity_main.xml</p>
<p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class=code><div class=codehilite><pre><span></span><code><span class=cp>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class=nt>&lt;LinearLayout</span> <span class=na>xmlns:android=</span><span class=s>&quot;http://schemas.android.com/apk/res/android&quot;</span>
    <span class=na>android:layout_width=</span><span class=s>&quot;fill_parent&quot;</span>
    <span class=na>android:layout_height=</span><span class=s>&quot;fill_parent&quot;</span>
    <span class=na>android:orientation=</span><span class=s>&quot;vertical&quot;</span> <span class=nt>&gt;</span>

    <span class=nt>&lt;Button</span> <span class=na>android:id=</span><span class=s>&quot;@+id/outputButton&quot;</span>
        <span class=na>android:layout_width=</span><span class=s>&quot;wrap_content&quot;</span>
        <span class=na>android:layout_height=</span><span class=s>&quot;wrap_content&quot;</span>
        <span class=na>android:text=</span><span class=s>&quot;Button&quot;</span>
        <span class=na>android:layout_gravity=</span><span class=s>&quot;center_horizontal&quot;</span> <span class=nt>/&gt;</span>

<span class=nt>&lt;/LinearLayout&gt;</span>
</code></pre></div></td></tr></table></p>
<p>AndroidManifext.xml</p>
<p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29</pre></div></td><td class=code><div class=codehilite><pre><span></span><code><span class=cp>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class=nt>&lt;manifest</span> <span class=na>xmlns:android=</span><span class=s>&quot;http://schemas.android.com/apk/res/android&quot;</span>
    <span class=na>package=</span><span class=s>&quot;gclue.com.myusbhost&quot;</span> <span class=nt>&gt;</span>

    <span class=nt>&lt;application</span>
        <span class=na>android:allowBackup=</span><span class=s>&quot;true&quot;</span>
        <span class=na>android:icon=</span><span class=s>&quot;@drawable/ic_launcher&quot;</span>
        <span class=na>android:label=</span><span class=s>&quot;@string/app_name&quot;</span>
        <span class=na>android:theme=</span><span class=s>&quot;@style/AppTheme&quot;</span> <span class=nt>&gt;</span>
        <span class=nt>&lt;activity</span>
            <span class=na>android:name=</span><span class=s>&quot;.MainActivity&quot;</span>
            <span class=na>android:label=</span><span class=s>&quot;@string/app_name&quot;</span> <span class=nt>&gt;</span>
            <span class=nt>&lt;intent-filter&gt;</span>
                <span class=nt>&lt;action</span> <span class=na>android:name=</span><span class=s>&quot;android.intent.action.MAIN&quot;</span> <span class=nt>/&gt;</span>

                <span class=nt>&lt;category</span> <span class=na>android:name=</span><span class=s>&quot;android.intent.category.LAUNCHER&quot;</span> <span class=nt>/&gt;</span>
            <span class=nt>&lt;/intent-filter&gt;</span>

            <span class=nt>&lt;intent-filter&gt;</span>
                <span class=nt>&lt;action</span> <span class=na>android:name=</span><span class=s>&quot;android.hardware.usb.action.USB_DEVICE_ATTACHED&quot;</span> <span class=nt>/&gt;</span>
            <span class=nt>&lt;/intent-filter&gt;</span>

            <span class=nt>&lt;meta-data</span> <span class=na>android:name=</span><span class=s>&quot;android.hardware.usb.action.USB_DEVICE_ATTACHED&quot;</span>
                <span class=na>android:resource=</span><span class=s>&quot;@xml/device_filter&quot;</span> <span class=nt>/&gt;</span>

        <span class=nt>&lt;/activity&gt;</span>
    <span class=nt>&lt;/application&gt;</span>

<span class=nt>&lt;/manifest&gt;</span>
</code></pre></div></td></tr></table></p>
<p>device_filter.xml</p>
<p>res/xmlフォルダーを新規作成し、device_filter.xmlを作成します。
<br>
<img alt="" src="../usb2-04.jpg" /></p>
<p>作成したdevice_filter.xmlを変更します。</p>
<p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre>1
2
3
4</pre></div></td><td class=code><div class=codehilite><pre><span></span><code><span class=cp>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
    <span class=nt>&lt;resources&gt;</span>
        <span class=nt>&lt;usb-device</span> <span class=na>vendor-id=</span><span class=s>&quot;1027&quot;</span><span class=nt>/&gt;</span> 
    <span class=nt>&lt;/resources&gt;</span>
</code></pre></div></td></tr></table></p>
<h2 id="_2">実行確認</h2>
<p>PCとAndroid端末をUSBケーブルで繋ぎます。</p>
<p>この状態では数秒後に自動的に終了してしまいます。
<br>
次にUSBケーブルを取り外し、下の図のようにArduinoとAndroid端末を繋ぎます。
<br>
順番としましては、以下のようになります。</p>
<p>スマートフォン　→　変換アダプタ　→　USBケーブル　
→　Arduino(USBシリアルアダプタ)　→　USBケーブル　→　PC
<br>
<img alt="" src="../usb2-05.jpg" /></p>
<p>この時、Arduino IDEを起動し、シリアルモニタを起動しておきます。
<br>
シリアルモニタはウィンドウの右上のルーペマークをクリックすると起動します。
<br>
<img alt="" src="../usb2-06.jpg" /></p>
<p>シリアルモニタが表示されました。
<br>
右下の転送レートがスケッチで入力した値と一致していないと正しく表示されないため、同じ値の「19200」にしておきましょう。
<br>
<img alt="" src="../usb2-07.jpg" /></p>
<p>Androidのボタンを押すと1が出力されます。
<br>
<img alt="" src="../usb2-08.jpg" /></p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="">
        
          <a href="../article3-1/" title="事前準備" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  前
                </span>
                事前準備
              </div>
            </div>
          </a>
        
        
          <a href="../article3-3/" title="テキスト受信" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  次
                </span>
                テキスト受信
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/vendor.83fe6e3c.min.js"></script>
      <script src="../assets/javascripts/bundle.7e1cb91c.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "\u30af\u30ea\u30c3\u30d7\u30dc\u30fc\u30c9\u3078\u30b3\u30d4\u30fc", "clipboard.copied": "\u30b3\u30d4\u30fc\u3057\u307e\u3057\u305f", "search.config.lang": "ja", "search.config.pipeline": "", "search.config.separator": "[\\s\\-\u3000\u3001\u3002\uff0c\uff0e]+", "search.result.placeholder": "\u691c\u7d22\u30ad\u30fc\u30ef\u30fc\u30c9\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044", "search.result.none": "\u4f55\u3082\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f", "search.result.one": "1\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.other": "#\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f"}</script>
      
      <script>
        app = initialize({
          base: "..",
          features: [],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.37585f48.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="../javascripts/extra.js"></script>
      
    
  </body>
</html>